<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Department Complaints</title>
<link rel="stylesheet" href="/src/globals.css">
</head>
<body class="font-sans bg-background text-foreground min-h-screen p-6">
  <h2 class="text-3xl font-bold text-center mb-6">Complaints Assigned to Department</h2>

  <label for="filter-status" class="font-medium">Filter by Status:</label>
  <select id="filter-status" onchange="filterComplaints()" class="rounded-md border border-border bg-background px-3 py-2 mb-4">
    <option value="all">All</option>
    <option value="open">Open</option>
    <option value="in_progress">In Progress</option>
    <option value="closed">Closed</option>
  </select>

  <label for="filter-priority" class="font-medium">Filter by Priority:</label>
  <select id="filter-priority" onchange="filterComplaints()" class="rounded-md border border-border bg-background px-3 py-2 mb-4">
    <option value="all">All</option>
    <option value="high">High</option>
    <option value="medium">Medium</option>
    <option value="low">Low</option>
  </select>

  <h3 class="font-semibold mt-4">Hotshots (High Priority Complaints)</h3>
  <ul id="hotshots-list" class="max-w-2xl mx-auto my-4 border-l-4 border-destructive bg-accent/50 text-destructive-foreground rounded-md p-4"></ul>

  <table id="complaints-table" class="w-full max-w-4xl mx-auto border border-border rounded-[var(--radius)] bg-card overflow-hidden">
    <thead>
      <tr class="bg-primary text-primary-foreground">
        <th class="text-left px-5 py-3">Complaint ID</th>
        <th class="text-left px-5 py-3">Description</th>
        <th class="text-left px-5 py-3">Status</th>
        <th class="text-left px-5 py-3">Priority</th>
        <th class="text-left px-5 py-3">Date Submitted</th>
      </tr>
    </thead>
    <tbody class="divide-y border-t border-border"></tbody>
  </table>

<script>
  const complaints = [
    {id: 1, description: 'Street light not working', status: 'open', priority: 'high', date: '2025-09-01'},
    {id: 2, description: 'Garbage collection delayed', status: 'in_progress', priority: 'medium', date: '2025-09-02'},
    {id: 3, description: 'Water leakage in park', status: 'closed', priority: 'low', date: '2025-09-03'},
    {id: 4, description: 'Road potholes', status: 'open', priority: 'high', date: '2025-09-05'}
  ];

  function filterComplaints() {
    const statusFilter = document.getElementById('filter-status').value;
    const priorityFilter = document.getElementById('filter-priority').value;

    const filtered = complaints.filter(c => {
      return (statusFilter === 'all' || c.status === statusFilter) &&
             (priorityFilter === 'all' || c.priority === priorityFilter);
    });

    const tbody = document.getElementById('complaints-table').getElementsByTagName('tbody')[0];
    tbody.innerHTML = '';

    filtered.forEach(c => {
      const row = document.createElement('tr');
      row.className = 'hover:bg-muted/30';
      row.innerHTML = `<td class="px-5 py-3">${c.id}</td><td class="px-5 py-3">${c.description}</td><td class="px-5 py-3">${c.status}</td><td class="px-5 py-3">${c.priority}</td><td class="px-5 py-3">${c.date}</td>`;
      tbody.appendChild(row);
    });

    const hotshotsList = document.getElementById('hotshots-list');
    hotshotsList.innerHTML = '';
    filtered.filter(c => c.priority === 'high').forEach(c => {
      const li = document.createElement('li');
      li.textContent = `${c.description} (ID: ${c.id})`;
      hotshotsList.appendChild(li);
    });
  }

  window.onload = filterComplaints;
</script>
</body>
</html>


